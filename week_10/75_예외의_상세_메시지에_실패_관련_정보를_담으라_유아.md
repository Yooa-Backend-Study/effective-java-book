# [ì•„ì´í…œ 75] ì˜ˆì™¸ì˜ ìƒì„¸ ë©”ì‹œì§€ì— ì‹¤íŒ¨ ê´€ë ¨ ì •ë³´ë¥¼ ë‹´ìœ¼ë¼

## Stack Trace

```java
java.lang.Exception: java.lang.RuntimeException: java.lang.NullPointerException
	at com.test.TestMain.main(TestMain.java:27)
Caused by: java.lang.RuntimeException: java.lang.NullPointerException
	at com.test.TestMain.main(TestMain.java:21)
	Suppressed: java.lang.Exception: test runtime suppressed exception6
		at com.test.TestMain.main(TestMain.java:26)
Caused by: java.lang.NullPointerException
	at com.test.TestMain.main(TestMain.java:16)
	Suppressed: java.lang.Exception: test suppressed exception1
		at com.test.TestMain.main(TestMain.java:18)
	Suppressed: java.lang.Exception: test suppressed exception2
		at com.test.TestMain.main(TestMain.java:19)
	Suppressed: java.lang.Exception: test suppressed exception3
		at com.test.TestMain.main(TestMain.java:20)
```

í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì„ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆ ìŠ¤ë ˆë“œëŠ” ì—¬ëŸ¬ ë©”ì„œë“œë¥¼ ëŒì•„ë‹¤ë‹™ë‹ˆë‹¤. ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê³  ì¢…ë£Œë˜ë©´, ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ê°€ì•¼ í•˜ëŠ”ë° ì´ë¥¼ ìœ„í•´ Stackì— ë©”ì„œë“œê°€ í˜¸ì¶œëœ í¬ì¸íŠ¸ë¥¼ ê¸°ë¡í•´ë†“ê²Œ ë©ë‹ˆë‹¤.

ì¦‰ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ ê¸°ë¡ë˜ëŠ” íŠ¹ì • í¬ì¸íŠ¸ë¥¼ ìŒ“ì•„ë†“ê³  í™œìš©í•˜ëŠ” ê²ƒì´ stack traceì¸ê±°ì£ .

```java
public void printStackTrace() {
        printStackTrace(System.err);
    }

    /**
     * Prints this throwable and its backtrace to the specified print stream.
     *
     * @param s {@code PrintStream} to use for output
     */
    public void printStackTrace(PrintStream s) {
        printStackTrace(new WrappedPrintStream(s));
    }

    private void printStackTrace(PrintStreamOrWriter s) {
        // Guard against malicious overrides of Throwable.equals by
        // using a Set with identity equality semantics.
        Set<Throwable> dejaVu =
            Collections.newSetFromMap(new IdentityHashMap<Throwable, Boolean>());
        dejaVu.add(this);

        synchronized (s.lock()) {
            // Print our stack trace
            s.println(this);
            StackTraceElement[] trace = getOurStackTrace();
            for (StackTraceElement traceElement : trace)
                s.println("\tat " + traceElement);

            // Print suppressed exceptions, if any
            for (Throwable se : getSuppressed())
                se.printEnclosedStackTrace(s, trace, SUPPRESSED_CAPTION, "\t", dejaVu);

            // Print cause, if any
            Throwable ourCause = getCause();
            if (ourCause != null)
                ourCause.printEnclosedStackTrace(s, trace, CAUSE_CAPTION, "", dejaVu);
        }
    }
```

Throwable í´ë˜ìŠ¤ë¥¼ ëœ¯ì–´ë³´ë©´ printStackTrace ë©”ì„œë“œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

PrintStreamIrWriter s ë³€ìˆ˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³´ë©´ ì•„ë˜ ìˆœì„œë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.

```java
1. s.println(this)
2. getOurStackTrace() ë¥¼ loopëŒë©´ì„œ s.println(â€œ\tat â€œ + traceElement);
3. getSuppressed()ë¥¼ loopëŒë©´ì„œ se.printEnclosedStackTrace(s, trace, SUPPRESSED_CAPTION, â€œ\tâ€, dejaVu);
4. getCause() ê°€ nullì´ ì•„ë‹ˆë¼ë©´ ourCause.printEnclosedStackTrace(s, trace, CAUSE_CAPTION, â€œâ€, dejaVu);
```

1. println(this)ëŠ” ê° Exception classê°€ toStringì„ overrideí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ Throwableì˜ toStringë©”ì†Œë“œì— ë”°ë¼ ì•„ë˜ì™€ ê°™ì€ ë¡œì§ìœ¼ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.

```java
public String toString() {
        String s = getClass().getName();
        String message = getLocalizedMessage();
        return (message != null) ? (s + ": " + message) : s;
}
```

printStacTrace ìµœìƒë‹¨ì˜ [Exceptioní´ë˜ìŠ¤ëª… : ë©”ì‹œì§€]ê°€ ì¶œë ¥ë˜ëŠ” ê²ƒì´ì£ .

2. getOurStackTrace()ëŠ” StackTraceElementë°°ì—´ì„ ë¦¬í„´í•©ë‹ˆë‹¤.

loopë¥¼ ëŒë©´ì„œ [íƒ­ë¬¸ì + â€œatâ€ + StackTraceElement.toString()] ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

StackTraceElementê°€ ë‹´ëŠ”ê²ƒì€ ì œì¼ ë°”ê¹¥ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” Exceptionì˜ stackë“¤ì…ë‹ˆë‹¤.

3. getSuppressed() ì—ì„œ suppressed Exception(java7ì¶”ê°€)ë“¤ì„ ê°€ì ¸ì™€ ì¶œë ¥í•˜ê³ 

4. getCause() ì—ì„œëŠ” chaingëœ Throwableì„ ë¦¬í„´í•˜ì—¬ ìœ„ì™€ ê°™ì€ ì¶œë ¥ ë¡œì§ì„ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤.

ì´ëŸ¬í•œ stack traceë“¤ì€ ì˜ˆì™¸ ë””ë²„ê¹…ì—ì„œ êµ‰ì¥íˆ ì¤‘ìš”í•©ë‹ˆë‹¤.

> ì‹¤íŒ¨ ìˆœê°„ì„ í¬ì°©í•˜ë ¤ë©´ ë°œìƒí•œ ì˜ˆì™¸ì— ê´€ì—¬ëœ ëª¨ë“  ë§¤ê°œë³€ìˆ˜ì™€ í•„ë“œì˜ ê°’ì„ ì‹¤íŒ¨ ë©”ì‹œì§€ì— ë‹´ì•„ì•¼ í•œë‹¤.

ë” ì •í™•í•œ ë””ë²„ê¹…ì„ ìœ„í•´ì„œ ì˜ˆì™¸ ë©”ì‹œì§€ì— ì‹¤íŒ¨ì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ë” ë§ì´ ë‹´ìœ¼ë¼ëŠ” ê±°ê² ì£ .

## Custom Exception

ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ì»¤ìŠ¤í…€ ì˜ˆì™¸ë¥¼ êµ¬í˜„í•´ë³´ë©° ì°¸ê³ í–ˆë˜ 4ê°€ì§€ì˜ Best Practiceê°€ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì•„ì´í…œê³¼ ê´€ë ¨í•˜ì—¬ ê³µìœ í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ ê°€ì ¸ì™”ì–´ìš”.

### 1. Always Provide a Benefit

ì»¤ìŠ¤í…€ ì˜ˆì™¸ì˜ ì˜ë„ëŠ” â€œìë°”ì˜ í‘œì¤€ ì˜ˆì™¸ë¡œ í‘œí˜„í•  ìˆ˜ ì—†ëŠ” ì •ë³´ ì œê³µâ€ì— ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì´ ì˜ë„ë¥¼ í•­ìƒ ìƒê¸°í•˜ë©° ì¥ì (Benefit)ì„ ë½‘ì•„ë‚´ì•¼ í•©ë‹ˆë‹¤.

ë§Œì•½ íŠ¹ì¶œë‚œ ì¥ì ì´ ì—†ëŠ” ì˜ˆì™¸ë¼ë©´ UnsupportedOperationException ì´ë‚˜ IllegalArgumentException ê³¼ ê°™ì´ í‘œì¤€ ì˜ˆì™¸ë“¤ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ë‚«ìŠµë‹ˆë‹¤. í‘œì¤€ ì˜ˆì™¸ê°€ ê°œë°œìë“¤ ì‚¬ì´ì—ì„œ ë” ì´í•´í•˜ê¸° ì‰½ê¸° ë•Œë¬¸ì´ì£ .

### 2. Follow the Naming Convention

ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ˆì™¸ ë„¤ì´ë° ì»¨ë²¤ì…˜ì„ ë”°ë¥´ëŠ” ê²ƒì€ ê·œì¹™ì…ë‹ˆë‹¤. ëª¨ë‘ê°€ ì´í•´í•˜ê¸° ì‰½ê²Œ ì‘ì„±í•˜ê¸°.

### 3. Provide Javadoc Comments for Your Exception Class

ì´ì „ ì•„ì´í…œì—ì„œ ì–¸ê¸‰í–ˆë“¯ ë¬¸ì„œí™”ëŠ” ì¤‘ìš”í•˜ê³ , ì˜ˆì™¸ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë„ ì ì ˆí•˜ê²Œ ë¬¸ì„œí™”í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

(\* Exceptionì„ ë˜ì§€ëŠ” ë©”ì„œë“œë‚˜ í´ë˜ìŠ¤ ë ˆë²¨ì—ì„œë„ ë¬¸ì„œí™”ê°€ ì¤‘ìš”í•˜ë‹¤ê³  ì´ë¯¸ ì–¸ê¸‰í–ˆìœ¼ë‹ˆ ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.)

ì˜ˆì™¸ëŠ” ê³§ APIì˜ ì¼ë¶€ê°€ ë˜ê¸° ë•Œë¬¸ì— ì–´ë–¤ ìƒí™©ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ë¥¼ ê¸°ìˆ í•´ë†“ëŠ” ê²ƒì´ í•„ìˆ˜ì ì…ë‹ˆë‹¤.

### 4. Provider Constructor That Sets the Cause

ë³´í†µ ì»¤ìŠ¤í…€ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ í‘œì¤€ ì˜ˆì™¸ë¥¼ catchí•´ì„œ ì»¤ìŠ¤í…€ ì˜ˆì™¸ë¡œ ë˜ì§€ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/jmjmjmz732002/post/bc2fc118-70df-4194-886f-b5a3d0463a03/image.png)

catchëœ ì •ë³´ë¥¼ ë˜ì§ˆ ë•Œ, ì´ë²ˆ ì•„ì´í…œì˜ í•µì‹¬ ë‚´ìš©ì´ ë‚˜ì˜µë‹ˆë‹¤.

â€œí•„ìˆ˜ì ì¸ ì •ë³´â€ë¥¼ causeë¡œ ì„¤ì •í•˜ì—¬ ë””ë²„ê¹…ì— ìœ ìš©í•˜ê²Œ í•  ê²ƒ.

Exception ê³¼ RuntimeException ì€ ì˜ˆì™¸ì˜ ì›ì¸ì„ ê¸°ìˆ í•˜ê³  ìˆëŠ” Throwableì„ ë°›ì„ ìˆ˜ ìˆëŠ” ìƒì„±ì ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ì»¤ìŠ¤í…€ ì˜ˆì™¸ë„ ë§ˆì°¬ê°€ì§€ë¡œ causeë¥¼ ë°”ë¡œ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ ìƒì„±ìì—ì„œ ì¸ìë¡œ ë°›ì•„ì£¼ì–´ super ìƒì„±ìì— Throwableë¥¼ ì „ë‹¬í•´ì£¼ë©´ ì¢‹ìŠµë‹ˆë‹¤.

```java
/*
* ì´ê²ƒì€ ì»¤ìŠ¤í…€ CheckedException ì…ë‹ˆë‹¤.
* ìë°”ì˜ ê¸°ë³¸ ì˜ˆì™¸ë¡œ í‘œí˜„í•  ìˆ˜ ì—†ëŠ” ì˜ˆì™¸ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.
* */
public class CustomCheckedExceptionEx extends Exception {

    public CustomCheckedExceptionEx() {
    }

    public CustomCheckedExceptionEx(String message) {
        super(message);
    }

    public CustomCheckedExceptionEx(String message, Throwable cause) {
        super(message, cause);
    }

    public CustomCheckedExceptionEx(Throwable cause) {
        super(cause);
    }

    public CustomCheckedExceptionEx(String message, Throwable cause, boolean enableSuppression, boolean writableStackTrace) {
        super(message, cause, enableSuppression, writableStackTrace);
    }
}

class CustomCheckedExceptionTest {
    public static void main(String[] args) throws CustomCheckedExceptionEx {
        try {
            // doSomething
        } catch (Exception e) {
            throw new CustomCheckedExceptionEx("ì»¤ìŠ¤í…€ ì²´í¬ë“œ ì˜ˆì™¸ ë°œìƒ!!", e);
        }
    }
}
```

ğŸ¤”Â ì œê°€ ê°œë°œí•  ë•Œì—ëŠ” í¸í•˜ê²Œ, ë°”ë¡œë°”ë¡œ ê°€ì ¸ë‹¤ ì“°ê¸° ìœ„í•´ì„œ í•˜ë‚˜ì˜ ê³µí†µ Exception í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë†“ê³ , ErrorCode ë„¤ì´ë°ì˜ Enumìœ¼ë¡œ ê° ì˜ˆì™¸ë¥¼ êµ¬ë¶„í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. cause ê´€ë ¨í•œ ë©”ì‹œì§€, rest apiì—ì„œ ì“°ì´ëŠ” ìƒíƒœ ì½”ë“œ ë“±ì— ëŒ€í•œ ê´€ë¦¬ë„ Enumì—ì„œ ì´ë£¨ì–´ì¡Œê³ ìš”.

ì´ê²Œ ì¼ë°˜ì ì¸ì§€ëŠ” ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë“¤ì€ ì–´ë–»ê²Œ êµ¬í˜„í•˜ì‹œëŠ”ì§€ ê¶ê¸ˆí•˜ë„¤ìš”!
