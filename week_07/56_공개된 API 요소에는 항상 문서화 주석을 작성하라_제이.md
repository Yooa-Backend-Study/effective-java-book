# 아이템 56) 공개된 API 요소에는 항상 문서화 주석을 작성하라

### 자바독

- 소스코드 파일에서 `문서화 주석`이라는 특수한 형태로 기술된 설명을 추려 API 문서로 변환해즘
- JDK 와 함께 패키지로 제공되는 도구
    
    **자바 5 → @literal, @code**
    
    **자바 6 → @implSpec**
    
    **자바 9 → @index**
    
- API를 올바로 문서화하려면 공개된 모든 `클래스`, `인터페이스`, `메서드`, `필드` 선언에 문서화 주석을 달아야 함.
직렬화할 수 있는 클래스라면 직렬화 형태에 관해서도!

### 문서화 주석 작성 규약

- `how`가 아닌 `what`을 기술해야 한다.
- 전제조건 (precondition) ; 메서드 호출 전에 충족되어야 하는 조건을 모두 나열해야 한다.
- 메서드가 성공적으로 수행된 후에 만족해야 하는 사후조건 ; 메서드 호출 후에 만족되어야 하는 결과도 모두 나열해야 한다.
- 전제조건은 `@throws` 태그로 비검사 예외를 선언하여 암시적으로 기술한다.
- `@param` 태그를 이용해 그 조건에 영향 받는 매개변수에 기술해야 한다.

### 문서화 주석 작성 방법

- `@param` / `@return` 태그의 설명은 **해당 매개변수가 뜻하는 값이나 반환값을 설명하는 명사구** 사용
    - 드물게는 명사구 대신 산술 표현식 쓰기도 함.

```java
public BigInteger multiply(BigInteger val) {
    return multiply(val, false);
}
```

- `{@code}` 태그는 두 가지 효과를 가짐
    
    1. 태그로 감싼 내용을 코드용 폰트로 렌더링
    
    2. 태그로 감싼 내용에 포함된 HTML 요소나 다른 자바독 태그를 무시
    
- 클래스를 **`상속용`**으로 설계할 때는 자기사용 패턴에 대해서도 문서에 남겨 다른 프로그래머에게 그 메서드를 올바로 재정의하는 방법을 알려주어야 함
    - 자기사용 패턴은 자바 8에 추가된 `@implSpec` 태그로 문서화
    - `@implSpec` : 해당 메서드와 하위 클래스 사이의 계약을 설명
    하위 클래스들이 그 메서드를 상속하거나 `super` 키워드를 이용해 호출할 때 그 메서드가 어떻게 동작 하는지를 명확히 인지하고 사용하도록 해주어야함
- API 설명에 HTML 메타문자를 포함시키려면 `@literal` 태그로 감싸면 됨 
`@code` 태그와 비슷하지만 코드 폰트로 렌더링하지는 않음
- 자바 10부터는 {@summary}라는 요약 설명 전용 태그가 추가되어, 깔끔한 처리가 가능

```java
/**
 * A suspect, such as Colonel Mustard or {@literal Mrs. Peacock}.
 */
public class Suspect { ... }
```

```java
/**
 *{@summary A suspect, such as Colonel Mustard or @literal Mrs. Peacock.}
 */
public class Suspect { ... }
```

- 메서드, 생성자 요약 설명 : 동작을 설명하는 (주어가 없는) `동사구`여야 함
- 클래스, 인터페이스, 필드 요약 설명 : 대상을 설명하는 `명사절`이어야 함
- 자바 9부터는 자바독이 생성한 HTML 문서에 검색(색인) 기능이 추가됨
    - This method complies with the {@index IEEE 754} standard.
- 제네릭 타입이나 제네릭 메서드를 문서화할 때는 모든 타입 `매개변수`에 주석을 달아야 한다.
- `열거 타입`을 문서화할 때는 `상수`들에도 주석을 달아야 한다.
- 애너테이션 타입을 문서화할 때는 멤버들에도 모두 주석을 달아야 한다.
- `@InhertitDocs` 태그를 사용해 상위 타입의 문서화 주석을 재사용할 수 있음
    - 상위 클래스보다 클래스가 구현한 “인터페이스” 를 먼저 찾음
- `스레드 안전성`과 `직렬화 가능성` 을 API 설명에 포함하라

### 정리

- 사실상 (코드에 변경 발생 → 문서 업데이트) 작업이 바로 이루어지지 않으면, 일관성이 깨질 수 있어 문서와 소스코드가 상이해질 수 있음
- 따라서 spring rest docs 와 같이 테스트코드를 작성하며 API 명세하는 자동화도구를 사용하는 게 좋다는 생각이 든다.